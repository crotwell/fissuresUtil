network.create=CREATE TABLE network (net_id int NOT NULL, \
                                       net_code varchar(2) NOT NULL, \
                                       net_begin_id int NOT NULL, \
                                       net_end_id int, \
                                       net_name varchar, \
                                       net_owner varchar, \
                                       net_description varchar, \
                                       PRIMARY KEY (net_id), \
                                       FOREIGN KEY(net_begin_id) \
                                       REFERENCES time (time_id), \
                                       FOREIGN KEY(net_end_id) \
                                       REFERENCES time (time_id))

network.getByCode=SELECT * FROM network WHERE net_code = ?

station.create = CREATE TABLE station ( sta_id int NOT NULL, \
                                        net_id int NOT NULL, \
                                        sta_code varchar(5), \
                                        sta_begin_id int, \
                                        sta_end_id int, \
                                        sta_name varchar, \
                                        sta_operator varchar, \
                                        sta_description varchar, \
                                        sta_comment varchar, \
                                        loc_id int, \
                                        FOREIGN KEY(sta_begin_id) \
                                        REFERENCES time (time_id), \
                                        FOREIGN KEY(sta_end_id) \
                                        REFERENCES time (time_id),\
                                        FOREIGN KEY(net_id) \
                                        REFERENCES network (net_id), \
                                        FOREIGN KEY(loc_id) \
                                        REFERENCES location(loc_id), \
                                        PRIMARY KEY(sta_id))

station.index_station_net_id=create index station_net_id_idx on station (net_id)
                                        
#set ( $station_neededForStationId = "sta_id, station.net_id, sta_code, sta_begin_id" )

#set ( $station_neededForStation = "$station_neededForStationId, sta_end_id, sta_name, station.loc_id, sta_operator, sta_description, sta_comment" )

station.getAllQuery = SELECT $station_neededForStationId FROM station

station.getAllForNet = SELECT $station_neededForStationId FROM station \
                 WHERE station.net_id = ?

station.getAllStations = SELECT $station_neededForStation FROM station

station.getByDBId = SELECT $station_neededForStation \
                FROM station WHERE sta_id = ?                 

station.getStationIdByDBId = SELECT $station_neededForStationId \
          FROM station WHERE sta_id = ?                   

station.getDBIdsForNetAndCode = SELECT sta_id FROM station WHERE net_id = ? AND sta_code = ?

station.putAll = INSERT INTO station (sta_id, net_id, sta_code, sta_begin_id, sta_end_id, \
                                      sta_name, sta_operator, sta_description, sta_comment, loc_id) \
                                      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
                                      
station.putId = INSERT INTO station (sta_id, net_id, sta_code, sta_begin_id) VALUES (?, ?, ?, ?)

station.putChanIdBits = INSERT INTO station (sta_id, net_id, sta_code) VALUES (?, ?, ?)

station.getIfNameExists = SELECT sta_id FROM station WHERE sta_id = ? AND sta_name IS NOT NULL

station.getDBId = SELECT sta_id FROM station WHERE net_id = ? AND sta_code = ? AND sta_begin_id = ?

station.updateSta = UPDATE station SET sta_end_id = ?, sta_name = ?, sta_operator = ?, \
                    sta_description = ? , sta_comment = ? , loc_id = ? WHERE sta_id = ?

station.deleteStation = DELETE FROM station WHERE sta_id = ?

site.create = CREATE TABLE site ( site_id int, \
                                  sta_id int, \
                                  site_code varchar(2), \
                                  site_begin_id int, \
                                  site_end_id int, \
                                  site_comment varchar, \
                                  loc_id int, \
                                  FOREIGN KEY (sta_id) \
                                  REFERENCES station (sta_id), \
                                  FOREIGN KEY (loc_id) \
                                  REFERENCES location (loc_id), \
                                  FOREIGN KEY (site_begin_id) \
                                  REFERENCES time (time_id), \
                                  FOREIGN KEY (site_end_id) \
                                  REFERENCES time (time_id), \
                                  PRIMARY KEY(site_id))

site.index_site_sta_id=create index site_sta_id_idx on site (sta_id)

site.getDBIdsForStaAndCode = SELECT site_id FROM site WHERE sta_id = ? and site_code = ?

site.putAll = INSERT INTO site (site_id, sta_id, site_code, site_begin_id, site_end_id, site_comment, loc_id) \
                               VALUES (?, ?, ?, ?, ?, ?, ?)
                               

site.putChanIdBits = INSERT INTO site (site_id, sta_id, site_code) VALUES (?, ?, ?)
                               
site.getIfCommentExists = SELECT site_id FROM site WHERE site_id = ? AND site_comment IS NOT NULL

site.getByDBId = SELECT * FROM site WHERE site_id = ?

site.getSiteIdByDBId = SELECT site_id, sta_id, site_code, site_begin_id FROM site WHERE site_id = ?

site.getDBId = SELECT site_id FROM site WHERE sta_id = ? AND site_code = ? AND site_begin_id = ?

site.updateSite = UPDATE site SET site_end_id = ?, site_comment = ?, loc_id = ? WHERE site_id = ?

site.deleteSite = DELETE FROM site WHERE site_id = ?

channel.create = CREATE TABLE channel (chan_id int, \
                                       site_id int, \
                                       chan_code varchar(3), \
                                       chan_begin_id int, \
                                       chan_end_id int, \
                                       chan_name varchar, \
                                       chan_orientation_az float, \
                                       chan_orientation_dip float, \
                                       chan_sampling_interval_id int, \
                                       chan_sampling_numpoints int, \
                                       PRIMARY KEY(chan_id), \
                                       FOREIGN KEY (site_id) \
                                       REFERENCES site (site_id), \
                                       FOREIGN KEY (chan_sampling_interval_id) \
                                       REFERENCES quantity (quantity_id), \
                                       FOREIGN KEY (chan_begin_id) \
                                       REFERENCES time (time_id), \
                                       FOREIGN KEY (chan_end_id) \
                                       REFERENCES time (time_id))

channel.index_channel_site_id=create index channel_site_id_idx on channel (site_id)

#set ( $channel_neededForChanId = "chan_id, channel.site_id, chan_code, chan_begin_id" )

#set ( $channel_neededForChannel = "$channel_neededForChanId, chan_end_id, chan_name, chan_sampling_numpoints, chan_sampling_interval_id, chan_orientation_dip, chan_orientation_az" )

#set ( $channel_getAllIdsQuery = "SELECT $channel_neededForChanId FROM channel" )

channel.getAllIds = $channel_getAllIdsQuery

channel.getAllIdsForStation = $channel_getAllIdsQuery , site \
                WHERE channel.site_id = site.site_id AND \
                site.sta_id = ?

channel.getAllIdsForNetwork = $getAllIdsQuery \
                , site, station \
                WHERE channel.site_id = site.site_id AND \
                site.sta_id = station.sta_id AND station.net_id = ?

#set ( $channel_getAllQuery = "SELECT $channel_neededForChannel FROM channel" )

channel.getAllChans = $channel_getAllQuery

channel.getAllChansForStation = $channel_getAllQuery , site \
                WHERE channel.site_id = site.site_id AND \
                site.sta_id = ?

channel.getByCodes = $channel_getAllQuery, site, station \
                WHERE channel.site_id = site.site_id AND \
                site.sta_id = station.sta_id AND \
                station.net_id = ? AND \
                station.sta_code = ? AND site.site_code = ? AND channel.chan_code = ?

channel.getAllChansForNetwork = $channel_getAllQuery , site, station \
                WHERE channel.site_id = site.site_id AND \
                site.sta_id = station.sta_id AND station.net_id = ?

channel.getStationDbId = SELECT sta_id FROM channel, site where Channel.site_id = site.site_id AND chan_id = ?

channel.putAll = INSERT INTO channel (chan_id, site_id, chan_code, chan_begin_id, \
                 chan_end_id, chan_name, chan_orientation_az, chan_orientation_dip, \
                 chan_sampling_interval_id, chan_sampling_numpoints) \
                 VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)

channel.updateNonId = UPDATE channel set site_id = ? , chan_end_id = ?, chan_name= ?, \
                      chan_orientation_az = ?, chan_orientation_dip = ?, \
                      chan_sampling_interval_id = ?, chan_sampling_numpoints = ? \
                      WHERE chan_id = ?
                 
channel.putId = INSERT INTO channel (chan_id, site_id, chan_code, chan_begin_id) VALUES (?, ?, ?, ?)

channel.getByDBId = SELECT * FROM channel WHERE chan_id = ?

